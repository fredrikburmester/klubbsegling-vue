{"version":3,"sources":["webpack:///./src/views/Profile.vue?6bbc","webpack:///./src/views/Profile.vue","webpack:///./src/components/AddBoatForm.vue","webpack:///./src/api/addBoatToUser.js","webpack:///./src/components/AddBoatForm.vue?555d","webpack:///./src/views/Profile.vue?8bdc"],"names":["class","loading","me","name","about","userBoats","b","key","id","to","imageLoading","getBoatImage","src","imageLoaded","getOwnerName","userboats","onNewBoat","logout","for","type","disabled","value","selectedBoat","allBoats","addBoat","addBoatToUser","boats","newBoat","user","Promise","resolve","reject","_boats","JSON","parse","stringify","boats_copy","length","push","headers","Authorization","localStorage","getItem","data","axios","put","API_URL","then","res","catch","err","props","Array","required","emits","this","$store","getters","getProfile","mounted","a","get","response","methods","boat","timeout","position","$emit","__exports__","components","AddBoatForm","getBoatsOfUser","dispatch","$route","params","nextUrl","$router","owner","image","url","render"],"mappings":"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","file":"js/chunk-5564fa04.d8bc61aa.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=0d23e660&lang=css\"","<template>\n\t<div class=\"wrapper\">\n\t\t<div v-if=\"!loading\" class=\"p-6 h-full text-left relative min-height-inherit pb-20\">\n\t\t\t<h2 class=\"card-title text-2xl\">{{ me.name }}</h2>\n\t\t\t<p>\n\t\t\t\t{{ me.about || null }}\n\t\t\t</p>\n\t\t\t<h1 class=\"mt-4 font-bold z-0\">Mina Båtar</h1>\n\t\t\t<div class=\"flex flex-col lg:flex-row\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"b in userBoats\"\n\t\t\t\t\t:key=\"b.id\"\n\t\t\t\t\tclass=\"w-full shadow stats mt-4 h-32 lg:mr-4\"\n\t\t\t\t>\n\t\t\t\t\t<router-link :to=\"`/profile/boat/${b.id}`\">\n\t\t\t\t\t\t<div class=\"card card-side card-bordered overflow-x-auto\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"imageLoading\"\n\t\t\t\t\t\t\t\tclass=\"w-24 h-32 flex justify-center content-center\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"btn btn-lg border-0 btn-circle loading h-auto\"\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<figure v-if=\"getBoatImage(b)\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tv-show=\"!imageLoading\"\n\t\t\t\t\t\t\t\t\tclass=\"h-32\"\n\t\t\t\t\t\t\t\t\t:src=\"getBoatImage(b)\"\n\t\t\t\t\t\t\t\t\t@load=\"imageLoaded\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t\t\t<div class=\"stat-title\">{{ getOwnerName(b) }}</div>\n\t\t\t\t\t\t\t\t<div class=\"stat-value text-lg\">{{ b.name }}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<AddBoatForm class=\"mt-4\" :userboats=\"userBoats\" @newBoat=\"onNewBoat\" />\n\t\t\t<button id=\"logout\" class=\"btn btn-error absolute bottom-6 px-6\" @click=\"logout\">\n\t\t\t\tLogga ut\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { AUTH_LOGOUT } from '../store/actions/auth'\nimport { API_URL } from '../store/actions/auth'\nimport { getBoatsOfUser } from '../api/getBoatsOfUser'\nimport AddBoatForm from '../components/AddBoatForm.vue'\n\nexport default {\n\tcomponents: {\n\t\tAddBoatForm,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tme: this.$store.getters.getProfile,\n\t\t\tloading: true,\n\t\t\tuserBoats: [],\n\t\t\timageLoading: true,\n\t\t}\n\t},\n\tmounted() {\n\t\tgetBoatsOfUser(this.me).then((boats) => {\n\t\t\tthis.userBoats = boats\n\t\t\tthis.loading = false\n\t\t})\n\t},\n\tmethods: {\n\t\tlogout: function () {\n\t\t\tthis.$store.dispatch(AUTH_LOGOUT).then(() => {\n\t\t\t\tif (this.$route.params.nextUrl != null) {\n\t\t\t\t\tthis.$router.push(this.$route.params.nextUrl)\n\t\t\t\t} else {\n\t\t\t\t\tthis.$router.push('/')\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tonNewBoat(value) {\n\t\t\t// Add the new boat to the table\n\t\t\tthis.userBoats.push(value)\n\t\t},\n\t\tgetOwnerName(boat) {\n\t\t\t// return boat.owner.name\n\t\t\tif (!!boat.owner) {\n\t\t\t\treturn boat.owner.name\n\t\t\t} else {\n\t\t\t\treturn 'No owner'\n\t\t\t}\n\t\t},\n\t\tgetBoatImage(boat) {\n\t\t\tif (!!boat.image) {\n\t\t\t\treturn `${API_URL}${boat.image.url}`\n\t\t\t} else {\n\t\t\t\tthis.imageLoading = false\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\t\timageLoaded() {\n\t\t\tthis.imageLoading = false\n\t\t},\n\t},\n}\n</script>\n<style>\n* {\n\tz-index: '0 !important';\n}\n.wrapper {\n\twidth: 100%;\n\tmin-height: 100vh;\n}\n.min-height-inherit {\n\tmin-height: inherit;\n}\n@media (max-width: 640px) {\n\t#logout {\n\t\twidth: 90vw;\n\t\tmargin-left: 5vw;\n\t\tleft: 0;\n\t}\n}\n#logout {\n}\n</style>","<template>\n\t<div class=\"flex space-x-4 mb-4 m-0\">\n\t\t<label for=\"register-modal\" class=\"btn btn-primary text-base-content modal-button\">\n\t\t\tLägg till båt\n\t\t</label>\n\t\t<input id=\"register-modal\" type=\"checkbox\" class=\"modal-toggle\" />\n\t\t<div class=\"modal m-0\">\n\t\t\t<div class=\"modal-box m-0\">\n\t\t\t\t<p>Välj båt att lägga till:</p>\n\t\t\t\t<div>\n\t\t\t\t\t<select\n\t\t\t\t\t\tv-model=\"selectedBoat\"\n\t\t\t\t\t\tclass=\"select select-bordered select w-full max-w-xs mt-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<option disabled value=\"Välj båt\">Välj båt</option>\n\t\t\t\t\t\t<option v-for=\"b in allBoats\" :key=\"b.id\" :value=\"b\">\n\t\t\t\t\t\t\t{{ b.name }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"modal-action flex justify-start\">\n\t\t\t\t\t<label for=\"register-modal\" class=\"btn btn-primary\" @click=\"addBoat\"\n\t\t\t\t\t\t>Lägg till</label\n\t\t\t\t\t>\n\t\t\t\t\t<label for=\"register-modal\" class=\"btn\">Avbryt</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { addBoatToUser } from '../api/addBoatToUser'\nimport { API_URL } from '../store/actions/auth'\nimport axios from 'axios'\nimport { createToast } from 'mosha-vue-toastify'\nimport 'mosha-vue-toastify/dist/style.css'\n\nexport default {\n\tname: 'AddBoatForm',\n\tprops: {\n\t\tuserboats: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['boats'],\n\tdata() {\n\t\treturn {\n\t\t\tuserBoats: this.userboats,\n\t\t\tallBoats: [],\n\t\t\tselectedBoat: '',\n\t\t\tme: this.$store.getters.getProfile,\n\t\t}\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tconst response = await axios.get(`${API_URL}/boats`, {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t\t},\n\t\t\t})\n\t\t\tthis.allBoats = response.data\n\t\t\tthis.selectedBoat = this.allBoats[0]\n\t\t} catch (err) {\n\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\taddBoat() {\n\t\t\t// Add boats to user via api request\n\t\t\t// Send the new boats to parent compoennt to show the new boat in the table\n\t\t\taddBoatToUser(this.userBoats, this.selectedBoat, this.me)\n\t\t\t\t.then((boat) => {\n\t\t\t\t\tcreateToast(`${boat.name} tillagd!`, {\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\tposition: 'top-right',\n\t\t\t\t\t})\n\t\t\t\t\tthis.$emit('newBoat', boat)\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t}\n\t\t\t\t\tcreateToast(err, {\n\t\t\t\t\t\ttype: 'danger',\n\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\tposition: 'top-right',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>","import axios from 'axios'\nimport { API_URL } from '../store/actions/auth'\nimport { createToast } from 'mosha-vue-toastify'\nimport 'mosha-vue-toastify/dist/style.css'\n\nexport const addBoatToUser = async (boats, newBoat, user) => {\n\treturn new Promise(function (resolve, reject) {\n\t\t// Create a copy of the current array of boats so to not mutate the original\n\t\tvar _boats = JSON.parse(JSON.stringify(boats))\n\t\tfor (var b in _boats) {\n\t\t\tif (_boats[b].id === newBoat.id) {\n\t\t\t\treject('Du har redan den här båten.')\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tvar boats_copy = []\n\n\t\t\tif (boats.length !== 0) {\n\t\t\t\tboats_copy = JSON.parse(JSON.stringify(boats))\n\t\t\t}\n\n\t\t\tboats_copy.push(newBoat)\n\n\t\t\tconst headers = {\n\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\tboats: boats_copy,\n\t\t\t}\n\n\t\t\taxios\n\t\t\t\t.put(`${API_URL}/users/${user.id}`, data, { headers })\n\t\t\t\t.then((res) => {\n\t\t\t\t\tresolve(newBoat)\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (process.env.NODE_ENV === 'development') {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t}\n\t\t\t\t\treject('Någonting gick snett.')\n\t\t\t\t})\n\t\t} catch (err) {\n\t\t\treject('Någonting gick snett.')\n\t\t}\n\t})\n}\n","import { render } from \"./AddBoatForm.vue?vue&type=template&id=3bccda47\"\nimport script from \"./AddBoatForm.vue?vue&type=script&lang=js\"\nexport * from \"./AddBoatForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/fredrikburmester/Documents/GitHub/klubbsegling-vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Profile.vue?vue&type=template&id=0d23e660\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=0d23e660&lang=css\"\n\nimport exportComponent from \"/Users/fredrikburmester/Documents/GitHub/klubbsegling-vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}
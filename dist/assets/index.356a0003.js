import{r as _,o as c,c as S,w as y,a as v,v as H,b as t,d,e as $,f as m,g as x,t as h,F as b,T as K,n as U,h as R,i as w,j as k,k as O,l as J,m as G,s as Q,p as B,q as L,u as X,x as Z,y as ee,z as te,A as se,B as oe,C as I,D as re,E as ne,G as ae,H as ie,I as le,J as ce,K as de,L as ue,M as me}from"./vendor.a0bddb9d.js";const he=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};he();var p=(e,s)=>{const a=e.__vccOpts||e;for(const[l,o]of s)a[l]=o;return a};const _e={name:"MobileNav",props:{active:{type:String,default:"Home"},open:{type:Boolean,default:!1}},emits:["close-nav"],data(){return{menuItems:[{text:"Hem",icon:"home",route:"/"},{text:"Alla Seglingar",icon:"flag",route:"/races"},{text:"Klubbar",icon:"anchor",route:"/clubs"},{text:"Profil",icon:"user",route:"/profile"}]}},methods:{close(){this.$emit("close",!0)}}},ge={class:"fixed top-0 left-0 w-screen bg-base-100 z-50"},pe={class:""},fe={class:"card rounded-none shadow-lg lg:card-side text-primary-content"},ve={class:"card-body"},be={class:"flex flex-col"},we={class:"py-4 hover:bg-primary rounded-lg"},ye={class:"px-4 text-base-content"},$e=t("hr",{class:"mx-8 border-base-content opacity-10"},null,-1),xe=t("div",{class:"py-8 flex flex-row justify-around"},[t("p",{class:"text-base-content"},"Om oss"),t("p",{class:"text-base-content"},"Mer")],-1);function ke(e,s,a,l,o,i){const r=_("font-awesome-icon"),n=_("router-link");return c(),S(K,{name:"slide"},{default:y(()=>[v(t("div",ge,[t("div",{class:"fixed top-0 left-0 h-screen w-screen",onClick:s[0]||(s[0]=u=>e.$emit("close-nav"))}),t("div",pe,[t("div",fe,[t("div",ve,[t("div",be,[(c(!0),d(b,null,$(o.menuItems,u=>(c(),d("div",{key:u,onClick:s[1]||(s[1]=g=>e.$emit("close-nav"))},[m(n,{to:u.route,class:""},{default:y(()=>[t("div",we,[t("span",ye,[m(r,{icon:u.icon,class:"mr-4"},null,8,["icon"]),x(" "+h(u.text),1)])])]),_:2},1032,["to"])]))),128))])]),$e,xe])])],512),[[H,a.open]])]),_:1})}var Re=p(_e,[["render",ke]]),Se="/img/klubbsegling/logo.png";const Ie={name:"Header",components:{MobileNav:Re},data(){return{open:!1}},computed:{},methods:{activeButton(e){return this.$route.name==e?"btn-primary text-base-content":"btn-ghost"},activeButtonDropdown(e){return this.$route.name==e?"btn-primary text-base-content":"btn-ghost"},closeNav(){this.open=!1},goToHome(){this.$router.push("/")}}},Ae={id:"header"},Ue={class:"fixed top-0 w-screen left-0 navbar shadow-lg bg-base-100 text-base-content z-50"},Le=t("span",{class:"ml-4 text-lg font-bold text-base-content"},"klubbsegling",-1),Be={class:"flex-none hidden px-2 mx-2 sm:flex"},Ce={class:"flex items-stretch"},Ve=x("Hem"),Ee=x("T\xE4vlingar"),je=x("Klubbar"),He=x("Profil"),Oe={class:"md:hidden ml-auto"},Pe=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-6 h-6 stroke-current"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1),Te=[Pe];function Ne(e,s,a,l,o,i){const r=_("font-awesome-icon"),n=_("router-link"),u=_("MobileNav");return c(),d("div",Ae,[t("div",Ue,[t("img",{id:"navbar-logo",class:"rounded-full w-10 h-10 ml-2 cursor-pointer",src:Se,alt:"logo",onClick:s[0]||(s[0]=(...g)=>i.goToHome&&i.goToHome(...g))}),Le,t("div",Be,[t("div",Ce,[m(n,{id:"home",class:U(["btn btn-sm rounded-btn mx-2",i.activeButton("Hem")]),to:"/"},{default:y(()=>[m(r,{icon:"home",class:"mr-2"}),Ve]),_:1},8,["class"]),m(n,{id:"races",class:U(["btn btn-sm rounded-btn mx-2",i.activeButton("Seglingar")]),to:"/races"},{default:y(()=>[m(r,{icon:"flag",class:"mr-2"}),Ee]),_:1},8,["class"]),m(n,{id:"profile",class:U(["btn btn-sm rounded-btn mx-2",i.activeButton("anchor")]),to:"/clubs"},{default:y(()=>[m(r,{icon:"user",class:"mr-2"}),je]),_:1},8,["class"]),m(n,{id:"profile",class:U(["btn btn-sm rounded-btn mx-2",i.activeButton("Profil")]),to:"/profile"},{default:y(()=>[m(r,{icon:"user",class:"mr-2"}),He]),_:1},8,["class"])])]),t("div",Oe,[t("div",{class:"btn border-0 bg-transparent text-base-content hover:bg-primary",onClick:s[1]||(s[1]=g=>o.open=!o.open)},Te)])]),m(u,{open:o.open,onCloseNav:s[2]||(s[2]=g=>o.open=!1)},null,8,["open"])])}var qe=p(Ie,[["render",Ne]]);const Me={name:"Footer"},De={class:"p-10 footer bg-base-200 text-base-content footer-center"},Fe=t("div",{class:"grid grid-flow-col gap-4"},[t("a",{class:"link link-hover"},"About us"),t("a",{class:"link link-hover"},"Contact")],-1),ze={class:"text-sm breadcrumbs"},We=x("Hem "),Ye=t("div",null,[t("p",null,"Copyright \xA9 2022 - All right reserved by Fredrik Burmester")],-1);function Ke(e,s,a,l,o,i){const r=_("font-awesome-icon"),n=_("router-link");return c(),d("footer",De,[Fe,t("div",null,[t("div",ze,[t("ul",null,[t("li",null,[m(n,{to:"/"},{default:y(()=>[m(r,{icon:"home",class:"mr-2"}),We]),_:1})]),(c(!0),d(b,null,$(e.$route.meta.breadcrumbs,u=>(c(),d("li",{key:u.name},[m(n,{to:u.path},{default:y(()=>[m(r,{icon:u.icon,class:"mr-2"},null,8,["icon"]),x(h(u.name),1)]),_:2},1032,["to"])]))),128))])])]),Ye])}var Je=p(Me,[["render",Ke]]);const Ge={components:{Header:qe,Footer:Je},computed:{}},Qe={class:""},Xe={class:"mt-16 grid"};function Ze(e,s,a,l,o,i){const r=_("router-view"),n=_("Header"),u=_("Footer");return c(),d("div",Qe,[t("div",Xe,[m(r)]),e.$route.meta.hideNavigation?R("",!0):(c(),S(n,{key:0})),m(u,{class:""})])}var et=p(Ge,[["render",Ze]]);const tt="modulepreload",P={},st="/",ot=function(s,a){return!a||a.length===0?s():Promise.all(a.map(l=>{if(l=`${st}${l}`,l in P)return;P[l]=!0;const o=l.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${i}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":tt,o||(r.as="script",r.crossOrigin=""),r.href=l,document.head.appendChild(r),o)return new Promise((n,u)=>{r.addEventListener("load",n),r.addEventListener("error",u)})})).then(()=>s())};const C="AUTH_REQUEST",T="AUTH_SUCCESS",N="AUTH_ERROR",V="AUTH_LOGOUT",rt="USER_REQUEST",q="USER_SUCCESS",nt="USER_ERROR",at="USER_BOATS",f="https://admin.klubbsegling.se",it=async()=>{try{return(await w.get(`${f}/races?_sort=name:DESC`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}})).data}catch{return k("N\xE5gonting gick snett...",{type:"danger",timeout:2e3,position:"top-right"}),[]}},lt={name:"LoadingCard"},ct=O('<div class="border border-blue-300 shadow-xl rounded-2xl p-4 h-56 mt-4 w-full mx-auto"><div class="animate-pulse flex"><div class="flex flex-col"><div class="mx-4 h-2 bg-gray-300 rounded w-32 mt-8"></div><div class="mx-4 h-2 bg-gray-300 rounded w-64 mt-8"></div><div class="mx-4 h-12 w-24 bg-gray-300 rounded-lg mt-8"></div></div></div></div>',1),dt=[ct];function ut(e,s,a,l,o,i){return c(),d("div",null,dt)}var M=p(lt,[["render",ut]]);const mt={components:{LoadingRaceCard:M},props:{race:{type:Object,default:()=>{}}},data:function(){return{hasImages:this.race.images.length>0,images:this.race.images,imageLoaded:!1}},computed:{headerUrl(){return f+this.race.images[0].formats.small.url}},mounted(){},methods:{formatDate(e){return e!==void 0?(e=new Date(e),`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`):"-"},loggedIn(){return this.$store.getters.isAuthenticated},getUser(){return this.$store.getters.getProfile},onImgLoad(){this.imageLoaded=!0}}},ht={class:"border border-blue-300 card shadow-xl image-full mt-4 h-56"},_t={key:0},gt=["src"],pt={class:"justify-end card-body h-56"},ft={class:"card-title"},vt={class:"max-h-12 overflow-hidden"},bt=t("div",{class:"card-actions"},[t("button",{class:"btn btn-primary"},"L\xE4s mer")],-1);function wt(e,s,a,l,o,i){const r=_("router-link"),n=_("LoadingRaceCard");return c(),d(b,null,[v(t("div",ht,[e.hasImages?(c(),d("figure",_t,[t("img",{src:i.headerUrl,onLoad:s[0]||(s[0]=(...u)=>i.onImgLoad&&i.onImgLoad(...u))},null,40,gt)])):R("",!0),t("div",pt,[t("h2",ft,h(a.race.name),1),t("p",vt,h(a.race.description||""),1),m(r,{to:`/race/${a.race.id}`},{default:y(()=>[bt]),_:1},8,["to"])])],512),[[H,!e.hasImages||e.imageLoaded]]),!e.imageLoaded&&e.hasImages?(c(),S(n,{key:0})):R("",!0)],64)}var yt=p(mt,[["render",wt]]);const $t={name:"Races",components:{RaceCard2:yt},props:{racesInView:{type:Array,required:!1,default:()=>[]},incomingYear:{type:String,required:!1,default:"2022"}},data(){return{races:this.racesInView,loaded:!1}},async mounted(){this.races.length==0&&(this.races=await it(),setTimeout(()=>this.loaded=!0,400))}},xt={class:"pt-2 pb-6"};function kt(e,s,a,l,o,i){const r=_("RaceCard2");return c(),d("div",xt,[(c(!0),d(b,null,$(o.races,n=>(c(),S(r,{key:n.id,race:n},null,8,["race"]))),128))])}var D=p($t,[["render",kt]]);const A=(e,s,a,l)=>new Promise(function(o,i){var r=`${f}/${e}`;s&&(r=r+"/"+s),a&&(r=r+"?"+a);var n={};l&&(n={headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}),w.get(r,n).then(u=>{o(u.data)}).catch(u=>{i(u)})});const Rt={name:"Home",components:{Races:D},data(){return{boats:null,races:null,me:this.$store.getters.getProfile,currentRaces:[],registeredRaces:[],racesInView:[],changeView:!1,active:"currentRaces",loading:!0}},computed:{thisYear(){var e=new Date;return e.getFullYear()}},async mounted(){var e=new Date,s=e.getFullYear();A("races",null,`created_at_gte=${s}-01-01&created_at_lte=${s}-12-31&_sort=name:DESC`,!0).then(a=>{this.currentRaces=a,A("races",null,`registrations.crew_members.id=${this.me.id}`,!0).then(l=>{this.registeredRaces=l,this.loading=!1})})},methods:{setRegisteredRacesInView(){this.racesInView=this.registeredRaces,this.changeView=!this.changeView,this.active="registeredRaces"},setThisYearRacesInView(){this.racesInView=this.currentRaces,this.changeView=!this.changeView,this.active="currentRaces"}}},St={key:0,class:"wrapper px-6 pt-2 pb-6 md:max-w-2xl justify-self-center"},It=t("h1",{class:"font text-sm mt-4 opacity-50"},"V\xE4lj vy",-1),At={class:"w-full shadow stats mt-4"},Ut=t("div",{class:"stat-title"},"Seglatser i \xE5r",-1),Lt={class:"stat-value text-info"},Bt={class:"stat-desc"},Ct=t("div",{class:"stat-title"},"Registrerad",-1),Vt={class:"stat-value text-primary"},Et=t("div",{class:"stat-desc"},null,-1),jt=t("h1",{class:"font-bold text-2xl mt-4"},"Seglatser i \xE5r",-1);function Ht(e,s,a,l,o,i){const r=_("Races");return o.loading?R("",!0):(c(),d("div",St,[It,t("div",At,[t("div",{class:U(["stat cursor-pointer",{"bg-gray-100":o.active=="currentRaces"}]),onClick:s[0]||(s[0]=(...n)=>i.setThisYearRacesInView&&i.setThisYearRacesInView(...n))},[Ut,t("div",Lt,h(o.currentRaces.length),1),t("div",Bt,h(i.thisYear),1)],2),t("div",{class:U(["stat cursor-pointer",{"bg-gray-100":o.active=="registeredRaces"}]),onClick:s[1]||(s[1]=(...n)=>i.setRegisteredRacesInView&&i.setRegisteredRacesInView(...n))},[Ct,t("div",Vt,h(o.registeredRaces.length),1),Et],2)]),jt,(c(),S(r,{key:o.changeView,"races-in-view":o.racesInView},null,8,["races-in-view"]))]))}var Ot=p(Rt,[["render",Ht]]);const Pt={name:"RacesView",components:{Races:D}},Tt={class:"wrapper px-6 pt-2 pb-6 md:max-w-2xl justify-self-center"};function Nt(e,s,a,l,o,i){const r=_("Races",!0);return c(),d("div",Tt,[m(r)])}var F=p(Pt,[["render",Nt]]);const qt={components:{LoadingCard:M},props:{club:{type:Object,default:()=>{}}},data:function(){return{occ:"",hasImages:this.club.images.length>0,hasThumbnail:!!this.club.header,images:this.club.images,imageLoaded:!1,thumbnail:this.club.header.formats.thumbnail.url}},computed:{thumbnailURL(){return`${f}${this.thumbnail}`}},methods:{loggedIn(){return this.$store.getters.isAuthenticated},getUser(){return this.$store.getters.getProfile},onImgLoad(){this.imageLoaded=!0}}},Mt={class:"border border-blue-300 card shadow-xl image-full mt-4 h-56"},Dt={key:0},Ft=["src"],zt={class:"justify-end card-body h-56"},Wt={class:"card-title"},Yt={class:"max-h-12 overflow-hidden"},Kt=t("div",{class:"card-actions"},[t("button",{class:"btn btn-primary"},"L\xE4s mer")],-1);function Jt(e,s,a,l,o,i){const r=_("router-link"),n=_("LoadingCard");return c(),d(b,null,[v(t("div",Mt,[e.hasThumbnail?(c(),d("figure",Dt,[t("img",{src:i.thumbnailURL,onLoad:s[0]||(s[0]=(...u)=>i.onImgLoad&&i.onImgLoad(...u))},null,40,Ft)])):R("",!0),t("div",zt,[t("h2",Wt,h(a.club.name),1),t("p",Yt,h(a.club.description||""),1),m(r,{to:`/club/${a.club.id}`},{default:y(()=>[Kt]),_:1},8,["to"])])],512),[[H,!e.hasThumbnail||e.imageLoaded]]),!e.imageLoaded&&e.hasImages?(c(),S(n,{key:0})):R("",!0)],64)}var Gt=p(qt,[["render",Jt]]);const Qt={name:"Clubs",components:{ClubCard:Gt},data(){return{clubs:[]}},beforeMount(){A("clubs",null,null,!0).then(e=>{this.clubs=e})}},Xt={class:"wrapper px-6 pt-2 pb-6 md:max-w-2xl justify-self-center"};function Zt(e,s,a,l,o,i){const r=_("ClubCard");return c(),d("div",Xt,[(c(!0),d(b,null,$(o.clubs,n=>(c(),S(r,{key:n.id,club:n},null,8,["club"]))),128))])}var es=p(Qt,[["render",Zt]]);const ts=(e,s,a,l,o)=>new Promise(function(i,r){""+localStorage.getItem("jwt"),w.get(`${f}/registrations?boat.id=${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(n=>{if(n.data.length===0){var u=[];for(let j in a)u.push(a[j].value);const g={boat:s,crew_members:u,race:l,handicap_system:o};w.post(`${f}/registrations`,g,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(()=>{i("Registrering lyckades.")})}else{return r("Registreringen g\xE5r inte att \xE4ndra."),0;var u}}).catch(n=>{})}),ss=async e=>new Promise(function(s,a){w.get(`${f}/registrations?boat.id=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(l=>{if(l.data.length===0)a("S\xE4ker p\xE5 att den b\xE5ten \xE4r registrerad?");else{const o=l.data[0].id;w.delete(`${f}/registrations/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(i=>{s("Registreringen borttagen.")})}})}),os=async()=>{try{return(await w.get(`${f}/users`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}})).data}catch{return k("N\xE5gonting gick snett...",{type:"danger",timeout:2e3,position:"top-right"}),[]}},z=e=>new Promise(function(s,a){w.get(`${f}/registrations?race=${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(l=>{s(l.data)}).catch(l=>{a(l)})}),rs={token:localStorage.getItem("jwt")||"",status:"",profile:JSON.parse(localStorage.getItem("user"))||{},hasLoadedOnce:!1,userBoats:[]},ns={isAuthenticated:e=>!!e.token,getToken:e=>e.token,authStatus:e=>e.status,getProfile:e=>e.profile,getUserBoats:e=>e.userBoats},as={[C]:({commit:e},s)=>new Promise((a,l)=>{e(C),w({url:`${f}/auth/local`,data:s,method:"POST"}).then(o=>{localStorage.setItem("user",JSON.stringify(o.data.user)),localStorage.setItem("jwt",o.data.jwt),w.defaults.headers.common.Authorization=o.data.token,e(T,o.data),e(q,o.data.user),k("V\xE4lkommen!",{type:"success",timeout:2e3,position:"top-right"}),a(o)}).catch(o=>{e(N,o),localStorage.removeItem("jwt"),k("N\xE5gonting gick snett...",{type:"danger",timeout:2e3,position:"top-right"}),l(o)})}),[V]:({commit:e})=>new Promise(s=>{e(V),localStorage.removeItem("jwt"),k("Du \xE4r nu utloggad.",{type:"danger",timeout:2e3,position:"top-right"}),s()})},is={[C]:e=>{e.status="loading"},[T]:(e,s)=>{e.status="success",e.token=s.token,e.hasLoadedOnce=!0},[N]:e=>{e.status="error",e.hasLoadedOnce=!0},[V]:e=>{e.token=""},[rt]:e=>{e.status="loading"},[q]:(e,s)=>{e.status="success",e.profile=s},[nt]:e=>{e.status="error"},[V]:e=>{e.profile={}},[at]:(e,s)=>{e.userBoats=s}};var ls={state:rs,getters:ns,actions:as,mutations:is},E=J({modules:{auth:ls},plugins:[G()]});const cs=e=>new Promise(function(s,a){E.getters.getUserBoats.length>0?s(E.getters.getUserBoats):w.get(`${f}/boats?sailors.username=${e.username}`,{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}}).then(l=>{E.commit("USER_BOATS",l.data),s(l.data)}).catch(l=>{k("Kunde inte h\xE4mta dina b\xE5tar...",{type:"danger",timeout:2e3,position:"top-right"}),a(l)})});const ds={name:"Race",components:{VueMultiselect:Q},data(){return{race:null,name:null,description:null,images:[],API_URL:f,img:"",userBoats:[],id:null,boats:[],crew:null,userOptions:[],handicap_systems:[{name:"Hcp",id:1},{name:"Hcp_FC_DWS",id:2},{name:"Hcp_FC_NoDWS",id:3},{name:"Hcp_SH_DWS",id:4},{name:"Hcp_SH_NoDWS",id:5}],hsys:"",selectedBoat:null,optionsLoaded:!1,me:this.$store.getters.getProfile,raceId:this.$route.params.id,registrations:[],error:null,loading:!0}},async beforeMount(){this.userBoats=await cs(this.me),A("users",null,null,!0).then(e=>{for(var s in e)this.userOptions.push({value:e[s].id,label:e[s].name})}),A("registrations",null,`race=${this.$route.params.id}`,!0).then(e=>{this.registrations=e})},async mounted(){A("races",this.$route.params.id,null,null).then(e=>{this.race=e,this.images=this.race.images,this.id=this.race.id,this.loading=!1})},methods:{async register(){ts(this.me,this.selectedBoat,this.crew,this.raceId,this.hsys).then(e=>{k(e,{type:"success"}),z(this.$route.params.id).then(s=>{this.registrations=s})}).catch(e=>{k(e,{type:"danger"})})},async unregister(){ss(this.selectedBoat).then(e=>{k(e,{type:"success"}),z(this.$route.params.id).then(s=>{this.registrations=s})}).catch(e=>{k(e,{type:"danger"})})},async loadRegisterOptions(){this.users=await os(),this.optionsLoaded=!0},getImageURL(e){return`${this.API_URL}${e}`}}},us={class:"wrapper"},ms={key:0},hs={key:1,class:"flex flex-col overflow-hidden"},_s={key:0,class:"carousel rounded-0 h-64 shadow-xl"},gs=["src"],ps={class:"mx-6 mt-6"},fs={class:"text-5xl font-bold"},vs={class:"mt-2"},bs={class:"shadow stats mx-4 mt-6"},ws={class:"stat"},ys=t("div",{class:"stat-figure text-secondary"},null,-1),$s=t("div",{class:"stat-title"},"Registrerade B\xE5tar",-1),xs={class:"stat-value"},ks=O('<div class="stat"><div class="stat-figure text-secondary"></div><div class="stat-title">Str\xE4cka</div><div class="stat-value">Obest\xE4mt</div><div class="stat-desc">Distans</div></div>',1),Rs=t("h1",{class:"mt-6 ml-6 text-lg font-bold"},"Deltagare:",-1),Ss={class:"overflow-x-auto my-4 mx-6"},Is={class:"table w-full table-zebra"},As=t("thead",null,[t("tr",null,[t("th",null,"B\xE5tnamn"),t("th",null,"Handikap"),t("th",null,"Crew")])],-1),Us={class:"w-screen flex space-x-4 h-20 place-content-start ml-6"},Ls=t("input",{id:"register-modal",type:"checkbox",class:"modal-toggle"},null,-1),Bs={class:"modal m-0"},Cs={class:"modal-box m-0"},Vs=t("p",null,"Vilken b\xE5t vill du registrera med?",-1),Es={key:0},js=["value"],Hs=t("p",null,"V\xE4lj handikappsystem",-1),Os=["value"],Ps=t("p",null,"V\xE4lj gastar",-1),Ts={key:1,class:"boarder border-slate-500 shadow rounded-md h-16 animate-pulse"},Ns={class:"modal-action flex justify-start"},qs=t("label",{for:"register-modal",class:"btn"},"Avbryt",-1),Ms=t("input",{id:"un-register-modal",type:"checkbox",class:"modal-toggle"},null,-1),Ds={class:"modal m-0"},Fs={class:"modal-box m-0"},zs=t("p",null,"Vilken b\xE5t vill du avregistrera?",-1),Ws={key:0},Ys=["value"],Ks={key:1,class:"boarder border-slate-500 shadow rounded-md h-16 animate-pulse"},Js={class:"modal-action flex justify-start"},Gs=t("label",{for:"un-register-modal",class:"btn"},"Avbryt",-1);function Qs(e,s,a,l,o,i){const r=_("VueMultiselect");return c(),d("div",us,[o.error||o.loading?(c(),d("div",ms,h(o.error),1)):(c(),d("div",hs,[o.images.length>0?(c(),d("div",_s,[(c(!0),d(b,null,$(o.images,n=>(c(),d("div",{key:n.id,class:"carousel-item"},[t("figure",null,[t("img",{class:"max-h-64",src:i.getImageURL(n.formats.small.url)},null,8,gs)])]))),128))])):R("",!0),t("div",ps,[t("h2",fs,h(o.race.name),1),t("p",vs,h(o.race.description||""),1)]),t("div",bs,[t("div",ws,[ys,$s,t("div",xs,h(o.registrations.length)+"st",1)]),ks]),Rs,t("div",Ss,[t("table",Is,[As,t("tbody",null,[(c(!0),d(b,null,$(o.registrations,n=>(c(),d("tr",{key:n.id},[t("th",null,h(n.boat.name),1),t("td",null,h(n.handicap_system.name),1),t("td",null,[(c(!0),d(b,null,$(n.crew_members,u=>(c(),d("kbd",{key:u.id,class:"kbd kbd-sm bg-gray-100 text-black px-2 mr-2"},h(u.name),1))),128))])]))),128))])])]),t("div",Us,[t("label",{for:"register-modal",class:"btn btn-primary text-base-content modal-button",onClick:s[0]||(s[0]=n=>i.loadRegisterOptions())}," Registrera "),Ls,t("div",Bs,[t("div",Cs,[Vs,o.optionsLoaded?(c(),d("div",Es,[v(t("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>o.selectedBoat=n),class:"select select-bordered select w-full max-w-xs mb-4"},[(c(!0),d(b,null,$(o.userBoats,n=>(c(),d("option",{key:n.id,value:n.id},h(n.name),9,js))),128))],512),[[B,o.selectedBoat]]),Hs,v(t("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>o.hsys=n),class:"select select-bordered select w-full max-w-xs mb-4"},[(c(!0),d(b,null,$(o.handicap_systems,n=>(c(),d("option",{key:n.id,value:n.id},h(n.name),9,Os))),128))],512),[[B,o.hsys]]),Ps,m(r,{modelValue:o.crew,"onUpdate:modelValue":s[3]||(s[3]=n=>o.crew=n),options:o.userOptions,multiple:!0,"track-by":"value","close-on-select":!1,label:"label",class:"mb-4"},null,8,["modelValue","options"])])):(c(),d("div",Ts)),t("div",Ns,[t("label",{for:"register-modal",class:"btn btn-primary",onClick:s[4]||(s[4]=n=>i.register())},"Registrera"),qs])])]),t("label",{for:"un-register-modal",class:"btn modal-button text-base-100",onClick:s[5]||(s[5]=n=>i.loadRegisterOptions())}," Avregistrera "),Ms,t("div",Ds,[t("div",Fs,[zs,o.optionsLoaded?(c(),d("div",Ws,[v(t("select",{"onUpdate:modelValue":s[6]||(s[6]=n=>o.selectedBoat=n),class:"select select-bordered select w-full max-w-xs mb-4"},[(c(!0),d(b,null,$(o.userBoats,n=>(c(),d("option",{key:n.id,value:n.id},h(n.name),9,Ys))),128))],512),[[B,o.selectedBoat]])])):(c(),d("div",Ks)),t("div",Js,[t("label",{for:"un-register-modal",class:"btn btn-error",onClick:s[7]||(s[7]=n=>i.unregister())},"Avregistrera"),Gs])])])])]))])}var Xs=p(ds,[["render",Qs]]);const Zs={name:"Boat",data(){return{image:null,loading:!0,boat:null}},beforeMount(){A("boats",this.$route.params.id,null,!0).then(e=>{this.boat=e,this.loading=!1,this.image=f+e.image.url}).catch(e=>{})},methods:{}},eo={id:"boat",class:"wrapper"},to={key:0,class:"hero min-h-screen items-start pt-8"},so={class:"flex flex-col hero-content lg:flex-row-reverse items-start"},oo=["src"],ro={class:"sm:justify-start"},no={class:"mb-5 text-5xl font-bold"},ao={class:"mb-5"};function io(e,s,a,l,o,i){return c(),d("div",eo,[o.loading?R("",!0):(c(),d("div",to,[t("div",so,[o.image?(c(),d("img",{key:0,src:o.image,class:"max-w-sm rounded-lg shadow-2xl"},null,8,oo)):R("",!0),t("div",ro,[t("h1",no,h(o.boat.name),1),t("p",ao,h(o.boat.description||""),1)])])]))])}var W=p(Zs,[["render",io]]);const lo={},co={class:"about"},uo=t("h1",null,"This is an profile proteted page",-1),mo=[uo];function ho(e,s){return c(),d("div",co,mo)}var _o=p(lo,[["render",ho]]);const go={data(){return{email:"",password:"",loading:!1}},methods:{login:function(){this.loading=!0;const{username:e,password:s}=this,a={identifier:e,password:s};this.$store.dispatch(C,a).then(()=>{this.$emit("loggedIn"),this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):this.$router.push("/")})}}},po={class:"lg:flex lg:justify-around lg:flex-row container sm:mx-auto mt-12 lg:mt-32 lg:px-14 pb-48"},fo=t("div",{class:"lg:mx-12 self-center px-8"},[t("h1",{class:"mb-5 text-5xl font-bold text-left"},"Klubbsegling"),t("p",{class:"mb-5"},[x("V\xE4lkommen till Sveriges b\xE4sta hemsida f\xF6r "),t("br"),x("seglingsentusiaster!")])],-1),vo=x(" . "),bo={class:"card-body"},wo=t("label",{class:"label"},"Anv\xE4ndarnamn",-1),yo=t("label",{class:"label"},"L\xF6senord",-1),$o=t("hr",null,null,-1),xo={key:0,class:"btn btn-primary my-4 loading",type:"submit"},ko={key:1,class:"btn btn-primary my-4",type:"submit"};function Ro(e,s,a,l,o,i){return c(),d("div",po,[fo,t("form",{class:"lg:card lg:shadow-2xl lg:rounded-3xl lg:w-2/5 form-control",onSubmit:s[2]||(s[2]=X((...r)=>i.login&&i.login(...r),["prevent"]))},[vo,t("div",bo,[wo,v(t("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>e.username=r),class:"input input-bordered",required:"",type:"text",placeholder:"anv\xE4ndarnamn"},null,512),[[L,e.username]]),yo,v(t("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>o.password=r),class:"input input-bordered",required:"",type:"password",placeholder:"l\xF6senord"},null,512),[[L,o.password]]),$o,o.loading?(c(),d("button",xo)):(c(),d("button",ko,"Login"))])],32)])}var So=p(go,[["render",Ro]]);const Io={props:{nextUrl:{type:String,default:"/"}},data(){return{name:"",email:"",password:"",password_confirmation:"",is_admin:null}},methods:{handleSubmit(e){if(e.preventDefault(),this.password===this.password_confirmation&&this.password.length>0){let s="http://localhost:3000/register";this.$http.post(s,{name:this.name,email:this.email,password:this.password,is_admin:this.is_admin}).then(a=>{localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("jwt",a.data.token),localStorage.getItem("jwt")!=null&&(this.$emit("loggedIn"),this.$route.params.nextUrl!=null?this.$router.push(this.$route.params.nextUrl):this.$router.push("/"))}).catch(a=>{})}else return this.password="",this.passwordConfirm="",alert("Passwords do not match")}}},Ao=t("h4",null,"Register",-1),Uo=t("label",{for:"name"},"Name",-1),Lo=t("label",{for:"email"},"E-Mail Address",-1),Bo=t("label",{for:"password"},"Password",-1),Co=t("label",{for:"password-confirm"},"Confirm Password",-1),Vo=t("label",{for:"password-confirm"},"Is this an administrator account?",-1),Eo=t("option",{value:"1"},"Yes",-1),jo=t("option",{value:"0"},"No",-1),Ho=[Eo,jo];function Oo(e,s,a,l,o,i){return c(),d("div",null,[Ao,t("form",null,[Uo,t("div",null,[v(t("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=r=>o.name=r),type:"text",required:"",autofocus:""},null,512),[[L,o.name]])]),Lo,t("div",null,[v(t("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=r=>o.email=r),type:"email",required:""},null,512),[[L,o.email]])]),Bo,t("div",null,[v(t("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=r=>o.password=r),type:"password",required:""},null,512),[[L,o.password]])]),Co,t("div",null,[v(t("input",{id:"password-confirm","onUpdate:modelValue":s[3]||(s[3]=r=>o.password_confirmation=r),type:"password",required:""},null,512),[[L,o.password_confirmation]])]),Vo,t("div",null,[v(t("select",{"onUpdate:modelValue":s[4]||(s[4]=r=>o.is_admin=r)},Ho,512),[[B,o.is_admin]])]),t("div",null,[t("button",{type:"submit",onClick:s[5]||(s[5]=(...r)=>i.handleSubmit&&i.handleSubmit(...r))},"Register")])])])}var Po=p(Io,[["render",Oo]]);const To=()=>ot(()=>import("./Profile.5dd82806.js"),["assets/Profile.5dd82806.js","assets/Profile.7ffe3254.css","assets/vendor.a0bddb9d.js"]),No=[{path:"/",name:"Hem",component:Ot,meta:{requiresAuth:!0},children:[{path:"active",name:"Seglatser i \xE5r",component:F,meta:{requiresAuth:!1},props:e=>({query:e.query.status})}]},{path:"/races",name:"Seglingar",component:F,meta:{requiresAuth:!0,breadcrumbs:[{name:"Seglingar",path:"/races",icon:"flag"}]}},{path:"/clubs",name:"Klubbar",component:es,meta:{requiresAuth:!1,breadcrumbs:[{name:"Klubbar",path:"/clubs",icon:"anchor"}]}},{path:"/race/:id",name:"Segling",component:Xs,meta:{requiresAuth:!1,breadcrumbs:[{name:"Seglingar",path:"/races",icon:"flag"},{name:"Segling",path:"/races/:id",icon:"calendar"}]}},{path:"/profile",name:"Profil",component:To,meta:{requiresAuth:!0,breadcrumbs:[{name:"Profil",path:"/profile",icon:"user"}]}},{path:"/profile/boat/:id",name:"Min B\xE5t",component:W,meta:{requiresAuth:!0,breadcrumbs:[{name:"Profil",path:"/profile",icon:"user"},{name:"B\xE5t",path:"/profile/boat/:id",icon:"ship"}]}},{path:"/boat/:id",name:"B\xE5t",component:W,meta:{requiresAuth:!1,breadcrumbs:[{name:"B\xE5t",path:"/boat/:id"}]}},{path:"/login",name:"Login",component:So,meta:{hideNavigation:!0}},{path:"/register",name:"Registrera",component:Po,meta:{hideNavigation:!0}},{path:"/admin",name:"Admin",component:_o,meta:{requiresAuth:!0,is_admin:!0}}],Y=Z({history:ee({}.BASE_URL),routes:No});Y.beforeEach((e,s,a)=>{if(e.matched.some(l=>l.meta.requiresAuth))if(localStorage.getItem("jwt")==null)a({path:"/login",params:{nextUrl:e.fullPath}});else{let l=JSON.parse(localStorage.getItem("user"));e.matched.some(o=>o.meta.is_admin)?l.is_admin==1?a():a({name:"Home"}):a()}else e.matched.some(l=>l.meta.guest)?localStorage.getItem("jwt")==null?a():a({name:"Home"}):a()});function qo(e={}){const{immediate:s=!1,onNeedRefresh:a,onOfflineReady:l,onRegistered:o,onRegisterError:i}=e;let r,n;const u=async(g=!0)=>{g&&(r==null||r.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()})),n&&n.waiting&&await se(n.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){r=new te("/sw.js",{scope:"/",type:"classic"}),r.addEventListener("activated",g=>{g.isUpdate||l==null||l()});{const g=()=>{a==null||a()};r.addEventListener("waiting",g),r.addEventListener("externalwaiting",g)}r.register({immediate:s}).then(g=>{n=g,o==null||o(g)}).catch(g=>{i==null||i(g)})}return u}oe(`${{}.BASE_URL}service-worker.js`,{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});qo({onNeedRefresh(){},onOfflineReady(){}});I.add(re);I.add(ne);I.add(ae);I.add(ie);I.add(le);I.add(ce);I.add(de);ue(et).use(E).use(Y).component("font-awesome-icon",me).mount("#app");export{f as A,M as L,p as _,A as a,V as b};
